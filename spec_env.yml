channels:
  - conda-forge
  - defaults
dependencies:
  # Common dependencies

  # Platform agnostic build dependencies
  - c-compiler
  - cxx-compiler
  - fortran-compiler

  # Libraries
  - setuptools<60.0.0 # for f90wrap
  - numpy
  - hdf5
  - openblas
  - libopenblas
  - fftw
  - scalapack
  - openmpi
  - h5py
  - matplotlib
  - scipy
  - scikit-build
  - mpi4py
  - ipython
  - cmake
  - ninja
  - f90nml
  - f90wrap

  - pip
  # Install the spec wrapper and py_spec package in editable mode
  # as enabled by https://github.com/conda/conda/pull/3969
  - pip:
    - "." 
    - "./Utilities/pythontools" 

# Set environment variables
variables:
  # Append py_spec to the python path, so completion is availble in your IDE
  PYTHONPATH: "'$PYTHONPATH:$PWD'/Utilities/pythontools"
  # Without a SPEC_PATH variable it will attempt to install the xspec executable
  # in /usr/local/bin, which will throw a permission error unless you are root.
  SPEC_PATH: "'$PWD'"
